##### 第9章 单车业务之订单管理模块

主要讲解了单车订单模块的开发，同时讲解了如何制定通用页面结构，囊括了地图业务、单车基础业务知识。

-  9-1 订单列表（上） (20:44)
-  9-2 订单列表（下） (24:45)



1. 为什么没有单独的 page组件，而是和 table 写在一起？

```react
代码收录于 src/pages/order/ index.js

pagination: Utils.pagination(res, (current) => {
	_this.params.page = current;
	_this.requestList();
})

<Table
  bordered
  columns={columns}
  dataSource={this.state.list}
  pagination={this.state.pagination}
  rowSelection={rowSelection}
  onRow={(record, index) => {
    return {
      onClick: () => {
        this.onRowClick(record, index);
      }
    };
  }}
/>

this.setState({
  list,
  pagination: Utils.pagination(res, (current) => {
    _this.params.page = current;
    _this.requestList();
  })
})


pagination(data,callback){
        return {
            onChange:(current)=>{
                callback(current)
            },
            current:data.result.page,
            pageSize:data.result.page_size,
            total: data.result.total_count,
            showTotal:()=>{
                return `共${data.result.total_count}条`
            },
            showQuickJumper:true
        }
    },

```

2. 动态生成表单！不错子！
   接受数组 formList，动态生成 label 等标签、input 框

```react
 <BaseForm formList={this.formList} filterSubmit={this.handleFilter}/>

   formList.forEach((item,i)=>{
                let label = item.label;
  item.type
   	Input
    时间查询
    SELECT
    CHECKBOX
```





#### 9-3 通用页面结构设计 (23:12)

看线上实现效果：

http://imoocms.51purse.com/#/home

http://imoocms.51purse.com/#/common/order/detail/2959165



跳到新页面

```
window.open(`/#/common/order/detail/${item.id}`,'_blank')
```

如何把 header组件设计成通用头？

1. 适用于 内容页header

2. 适用于 detail页header

   布局会不同


如何区分？看Header组件是否拿到了 menuType 这个值。

```react
render(){
        const { menuName, menuType } = this.props;
}
```



#### 9-4 订单基础信息实现 (19:42)

```less
定义 clearfix
.clearfix{
    &::after{
        content:' ';
        clear:both;
        display: block;
        visibility: hidden;
    }
}


使用：
@import '../../style/common';

.detail-form{
      li{
        .clearfix;
        margin:20px 0;
        line-height:20px;
        font-size:15px;
        color:@colorC;
      }
    }
```

#### 9-5 地图功能实现（上） (25:08)

#### 9-6 地图功能实现（下） (18:16)

思路：

在componentDidMount 通过  this.props.match.params.orderId;  拿到id

然后，发送ajax请求，拿到订单 info，渲染地图

如何拿到地图空间，调用路线绘制防范，在服务区绘制方法

